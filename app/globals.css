@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;

  /* 应用级无衬线字体栈（英文 Tiempos + 中文苹方 + 系统回退）
     这里用 next/font/local 提供的变量，保证走打包后的字体 family 名称 */
  --font-app-sans: "Tiempos Text", "TiemposText", var(--font-tiempos),
    "PingFang SC", "PingFangSC", var(--font-pingfang),
    system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

  /* 品牌橙色体系，降低饱和度、更高可读性 */
  --primary-muted: #f8efe6;
  --primary-surface: #fbf6f1;
  --primary-main: #f2c6a4;
  --primary-strong: #e6a97a;
  --primary-deep: #b4764c;
  --primary-contrast: #4a2c1a;
  --primary-border: #e3c8b2;
  --primary-focus: rgba(226, 157, 102, 0.35);
  --primary-shadow: rgba(171, 111, 70, 0.18);
  --primary-gradient-start: #fdf7f1;
  --primary-gradient-mid: #f4d7bd;
  --primary-gradient-end: #e1af86;

  /* 温润辅助色系 */
  --tone-chip-bg: #f7ede2;
  --tone-chip-text: #9a6a3a;

  --tone-info-bg: #f5f0ea;
  --tone-info-border: #e4d7ca;
  --tone-info-text: #7a5940;
  --tone-info-strong: #d99c6b;

  --tone-success-bg: #edf3f0;
  --tone-success-border: #d3e4d7;
  --tone-success-text: #396851;
  --tone-success-strong: #4f8b6b;

  --tone-danger-bg: #fbefed;
  --tone-danger-border: #f3cfc7;
  --tone-danger-text: #b4513f;
  --tone-danger-strong: #ce6a55;

  --tone-neutral-bg: #f3eee8;
  --tone-neutral-border: #e0d4c8;
  --tone-neutral-text: #5c4b3c;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  /* Tailwind 的 sans/mono 变量映射到我们自己的字体 */
  --font-sans: var(--font-app-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-app-sans);
}

/* Hide scrollbar utility class */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.tone-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 9999px;
  background: var(--tone-chip-bg);
  color: var(--tone-chip-text);
  font-weight: 600;
}

.tone-card {
  border-radius: 0.75rem;
  border: 1px solid transparent;
  padding: 0.75rem 1rem;
  background: var(--tone-neutral-bg);
  border-color: var(--tone-neutral-border);
  color: var(--tone-neutral-text);
}

.tone-card--info {
  background: var(--tone-info-bg);
  border-color: var(--tone-info-border);
  color: var(--tone-info-text);
}

.tone-card--success {
  background: var(--tone-success-bg);
  border-color: var(--tone-success-border);
  color: var(--tone-success-text);
}

.tone-card--danger {
  background: var(--tone-danger-bg);
  border-color: var(--tone-danger-border);
  color: var(--tone-danger-text);
}

.tone-button {
  border-radius: 9999px;
  padding: 0.5rem 1.25rem;
  font-weight: 600;
  transition: background 150ms ease, box-shadow 150ms ease, color 150ms ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
  border: 1px solid transparent;
}

.tone-button--primary {
  background: var(--primary-main);
  border-color: var(--primary-border);
  color: var(--primary-contrast);
}

.tone-button--primary:hover:not(:disabled) {
  background: var(--primary-strong);
}

.tone-button--primary:active:not(:disabled) {
  background: var(--primary-deep);
  color: #fdf5ee;
}

.tone-button--primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  box-shadow: none;
}

.tone-button--danger {
  background: var(--tone-danger-bg);
  border-color: var(--tone-danger-border);
  color: var(--tone-danger-text);
}

.tone-button--ghost {
  background: transparent;
  border: 1px solid var(--tone-neutral-border);
  color: var(--tone-neutral-text);
  box-shadow: none;
}

/* ----------------------------- */
/* Excalidraw theming overrides  */
/* ----------------------------- */

.excalidraw {
  --excalidraw-primary-text: #ffffff;
}

/* Shared typography for Excalidraw UI chrome */
.excalidraw .layer-ui__wrapper,
.excalidraw .layer-ui__wrapper * {
  font-family: var(--font-app-sans);
}

.excalidraw button.ToolIcon_type_button {
  border-radius: 12px;
  border: 1px solid transparent;
  background: var(--primary-surface);
  color: var(--primary-contrast);
  transition: background 0.15s ease, box-shadow 0.15s ease, color 0.15s ease,
    border 0.15s ease;
}

.excalidraw button.ToolIcon_type_button svg {
  color: inherit;
}

.excalidraw button[aria-pressed="true"],
.excalidraw button[aria-expanded="true"],
.excalidraw .layer-ui__wrapper button.ToolIcon_type_button:hover,
.excalidraw .layer-ui__wrapper button.ToolIcon_type_button:focus-visible {
  background: var(--primary-main);
  color: var(--primary-contrast);
  border-color: var(--primary-border);
  box-shadow: 0 8px 16px var(--primary-shadow);
}

.excalidraw button[aria-pressed="true"] svg,
.excalidraw button[aria-expanded="true"] svg,
.excalidraw .layer-ui__wrapper button.ToolIcon_type_button:hover svg {
  color: var(--primary-contrast);
}

.excalidraw .layer-ui__wrapper__library,
.excalidraw .layer-ui__wrapper__library *,
.excalidraw .sidebar-tabs-root,
.excalidraw .sidebar-tabs-root * {
  font-family: var(--font-app-sans) !important;
  color: var(--primary-contrast);
}

.excalidraw .sidebar-tab-trigger {
  border-radius: 12px !important;
  background: transparent !important;
  color: var(--primary-contrast) !important;
  border: 1px solid transparent !important;
  box-shadow: none !important;
  transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.excalidraw .sidebar-tab-trigger[data-state='active'] {
  background: var(--primary-surface) !important;
  border-color: var(--primary-border) !important;
  color: var(--primary-contrast) !important;
  box-shadow: inset 0 0 0 1px var(--primary-border) !important;
}

.excalidraw .sidebar__close {
  border-radius: 999px;
  color: var(--tone-neutral-text);
}

.excalidraw .library-menu-items__no-items__label {
  font-size: 1rem;
  font-weight: 600;
  color: var(--primary-contrast);
}

.excalidraw .library-menu-items__no-items__hint {
  font-size: 0.85rem;
  color: rgba(74, 44, 26, 0.75);
}

.excalidraw .library-menu-control-buttons,
.excalidraw .library-menu-items-container__items,
.excalidraw .library-menu-items__no-items {
  width: 100%;
}

.excalidraw .library-menu-browse-button,
.excalidraw .library-menu-control-buttons button,
.excalidraw .library-menu-dropdown-container button,
.excalidraw .library-menu-dropdown-container .dropdown-menu-button,
.excalidraw .LibraryMenu__list-item button {
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  font-family: var(--font-app-sans) !important;
  font-weight: 600 !important;
  padding: 0.65rem 1rem !important;
  border-radius: 999px !important;
  border: 1px solid var(--primary-border) !important;
  background: var(--primary-main) !important;
  color: var(--primary-contrast) !important;
  box-shadow: none !important;
  transition: background 0.15s ease, box-shadow 0.15s ease;
}

.excalidraw .library-menu-browse-button:hover,
.excalidraw .library-menu-control-buttons button:hover,
.excalidraw .library-menu-dropdown-container button:hover,
.excalidraw .library-menu-dropdown-container .dropdown-menu-button:hover,
.excalidraw .LibraryMenu__list-item button:hover {
  background: var(--primary-strong) !important;
}

.excalidraw .library-menu-browse-button:active,
.excalidraw .library-menu-control-buttons button:active,
.excalidraw .library-menu-dropdown-container button:active,
.excalidraw .library-menu-dropdown-container .dropdown-menu-button:active,
.excalidraw .LibraryMenu__list-item button:active {
  background: var(--primary-deep) !important;
  color: #fdf5ee !important;
}

.excalidraw .library-menu-browse-button:disabled,
.excalidraw .library-menu-control-buttons button:disabled,
.excalidraw .library-menu-dropdown-container button:disabled,
.excalidraw .library-menu-dropdown-container .dropdown-menu-button:disabled,
.excalidraw .LibraryMenu__list-item button:disabled {
  background: var(--primary-muted) !important;
  color: rgba(74, 44, 26, 0.5) !important;
  border-color: var(--primary-border) !important;
}

.excalidraw .library-menu-dropdown-container button svg,
.excalidraw .library-menu-dropdown-container .dropdown-menu-button svg {
  color: currentColor !important;
}

/* Font choice specific overrides for inline editors */
.excalidraw .excalidraw-textEditor textarea,
.excalidraw .excalidraw-textEditor input {
  font-family: var(--font-app-sans);
}
